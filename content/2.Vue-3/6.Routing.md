# Routing

## Basic Setup

Ã–ncelikle vue-router projeye dahil edilir.
<br/>
Basit bir router yazalÄ±m

```
import { createRouter, createWebHistory } from 'vue-router';

const router = createRouter({
    history: createWebHistory(),
    routes: [
        { path: '/contact', component: ContactView },
        { path: '/about', component: AboutView },
    ],
    linkActiveClass: 'active', // link aktif olunca bu class eklenecek
});

createApp(App)
.use(router)
.mount('#app');
```

1. ```vue-router``` import edilir. createRouter ile history ve routes yazÄ±lÄ±r.
2. ```.use(router)``` ile projeye dahil edilir.
    ```
    // App.vue
   <template>
         <router-view />
   </template>
    ```
3. App.vue veya main vue dosyasÄ± hangisi ise router-view tagÄ± ile dahil etme sÃ¼reci
   tamamlanÄ±r.

## router-link

```
<template>
    <ul>
        <li>
            <router-link to="/about">About</router-link>
        </li>
        <li>
            <router-link to="/contact">Contact</router-link>
        </li>
    </ul>
</template>
```

```<router-link>``` , vue-router Ã¶zel aracÄ±dÄ±r ve url yÃ¶nlendirmelerinde kullanacaÄŸÄ±mÄ±z etikettir.

1. Routing uyumluluÄŸu: ```router-link``` , Vue Router tarafÄ±ndan saÄŸlanan Ã¶zel bir
   bileÅŸendir ve Vue Router ile entegrasyonu saÄŸlar. Bu bileÅŸen, tek sayfa
   uygulamalarÄ±nda gezinti yaparken URL'leri gÃ¼ncellemek iÃ§in kullanÄ±lÄ±r. ```router-link```
   kullanmak, sayfa yenilemeleri olmadan uygulama iÃ§inde gezinmeyi saÄŸlar ve yolu
   belirtmek iÃ§in Vue Router'in yÃ¶nlendirme sistemini kullanÄ±r.
2. Otomatik aktif durum: ```router-link``` , geÃ§erli sayfanÄ±n URL'si ile iliÅŸkili olduÄŸunda
   otomatik olarak aktif bir duruma geÃ§er. BÃ¶ylece, gezinme menÃ¼lerinde veya
   navigasyon bileÅŸenlerinde etkin sayfalarÄ± veya etkin baÄŸlantÄ±larÄ± vurgulamak iÃ§in
   kolayca kullanÄ±labilir.
3. DÃ¼zgÃ¼n URL iÅŸleme: ```router-link``` , Vue Router tarafÄ±ndan saÄŸlanan URL iÅŸleme
   mantÄ±ÄŸÄ±nÄ± takip eder ve Ã¶zel durumlarla baÅŸa Ã§Ä±kabilir. Ã–rneÄŸin, parametreleri veya
   sorgu dizelerini iÃ§eren URL'leri dÃ¼zgÃ¼n bir ÅŸekilde iÅŸleyebilir ve uygun ÅŸekilde URL
   oluÅŸturur.
4. EriÅŸilebilirlik: ```router-link``` , eriÅŸilebilirlik standartlarÄ±na uygun bir ÅŸekilde
   tasarlanmÄ±ÅŸtÄ±r. Bu, klavye eriÅŸilebilirliÄŸi, ekran okuyucu uyumluluÄŸu ve diÄŸer
   eriÅŸilebilirlik faktÃ¶rlerini desteklemek iÃ§in gerekli Ã¶zelliklere sahiptir.

## Styling Active Links

Linkler aktifleÅŸince yani mevcut url ile active-link hedef urlâ€™si aynÄ± olduÄŸunda linklerimiz
aktif olmuÅŸ olur.

```
const router = createRouter({
    history: createWebHistory(),
    routes: [
        { path: '/contact', component: ContactView },
        { path: '/about', component: AboutView },
    ],
    linkActiveClass: 'active', // link aktif olunca bu class eklenecek
});
```

linkActiveClass ile linkler aktifleÅŸince alacaÄŸÄ± class adÄ±nÄ± belirtebiliriz eÄŸer belirtmezsek
default olarak ```.router-link-active``` ismini alÄ±r. Bu ÅŸekilde rotalarÄ±n aktifliÄŸine style
ekleyebiliriz.

## Programmatic Navigation

Kod Ã¼zerinden routerâ€™a hakim olmak istiyorsak bilmemiz gereken temel fonksiyonlar;

- ```this.$router.push(â€/homeâ€)``` â†’ /home adresine gitti.
- ```this.$router.back()``` â†’ Bir Ã¶nceki sayfaya gitti. (geri)
- ```this.$router.forward()``` â†’ Bir sonraki sayfaya gitti. (ileri)

## Passing Data with Route Params (Dynamic Segments)

URL ile deÄŸerleri yakalayabilir ve component iÃ§inde bu deÄŸerlerle operasyonlar yapabiliriz.

```
<template>
    <div>About View {{ paramId }}</div>
</template>

<script setup lang="ts">
import { useRoute } from 'vue-router';
import { onMounted, ref } from 'vue';

const route = useRoute();
const paramId = ref<any>(null);
    onMounted(() => {
        paramId.value = route.params.id ?? 'NO VALUE!';
        console.log(route.params.id);
    });
</script>
```

## Passing Params as Props

Route parametrelerini komponent iÃ§inde props olarak tutabiliriz.
```
const router = createRouter({
   history: createWebHistory(),
   routes: [
      { path: '/contact', component: ContactView },
      { path: '/about/:aboutId', component: AboutView, props: true },
   ],
});
```
RotamÄ±zÄ± oluÅŸtururken ```props: true;``` yaparak aslÄ±nda ÅŸunu diyoruz. Biz aboutId
parametresini aslÄ±nda props olarakta ileteceÄŸiz.
```
const props = defineProps({
   aboutId: {
      type: String,
      reqired: true,
   },
});
```
Ve bu ÅŸekilde komponent iÃ§inden deÄŸerimizi alÄ±oyruz. Komponent iÃ§inde ki ve
createRouter iÃ§indeki parametre adÄ± aynÄ± olmak zorunda.

## Redirecting & Catch-All Route

1. RotalarÄ±mÄ±za yÃ¶nlendirmeler ekleyerek hedef urlâ€™ye ulaÅŸmak isteyen kullanÄ±cÄ±yÄ±
   belirlediÄŸimiz urlâ€™ye yÃ¶nlendirebiliriz.
2. 404 Not Found sayfasÄ± gibi bazÄ± urllerkendinden Ã¶ncekilerle eÅŸleÅŸmeyen tÃ¼m rotalarÄ±
   yakalar.
```
const router = createRouter({
   history: createWebHistory(),
   routes: [
      { path: "/", redirect: "/contact" },
      { name: "contact", path: '/contact', component: ContactView },
      { path: '/about/:aboutId', component: AboutView, props: true },
      { path: '/:catchAll(.*)', component: NotFoundView },
   ],
});
```

## Nested Routes

RotalandÄ±rmamÄ±zÄ± yaparken Ã§oÄŸu zaman farkederiz ki url adreslerimiz bir noktaya kadar
aynÄ± ÅŸekilde gelir. Bunlara nested routes deriz.
```
const router = createRouter({
   history: createWebHistory(),
   routes: [
      { path: "/", redirect: "/contact" },
      { path: '/contact', component: ContactView },
      { path: '/about', component: AboutView, props: true, children: [
         { path: '/:aboutId', component: AboutView, props: true },
      ]
      },
      { path: '/:catchAll(.*)', component: NotFoundView },
   ],
});
```

## Using Query Params

Query parametrelerimizi Vue-Router ile nasÄ±l kontrol set ederiz? NasÄ±l eriÅŸiriz?
<br />
Ã–rnek;
```
ğŸ’¡ https://mysocialapp.com/register/:id?name=Ahmet&surname=Ozdemir
```
1. Bu kullanÄ±m linki direkt olarak set etmemizi saÄŸlar.
   ```
   <template>
      <router-link to=`${baseUrl}/register/${linkParams}?${linkQueries}`>
         go login
      </router-link>
   </template>
   ```
2. Bu kullanÄ±m iÃ§in route oluÅŸtururken name belirtilmelidir.
   ```
   <template>
      <router-link :to="generateLink">
         go login
      </router-link>
   </template>
   <script setup lang="ts">
   
   const generateLink = () => {
      return {
         name: "register",
         params: {
            registerId: this.id
         },
         query: {
            name: "Ahmet",
            surname: "Ã–zdemir"
         }
      }
   }
   </script>
   ```
3. Fonksiyona dayalÄ± yÃ¶nlendirmedir.
   ```
   <template>
      <form :submit.prevent="submitFn">
         <!-- Inputlar -->
         <button type="submit">GÃ¶nder</button>
      </form>
   </template>
   
   <script setup lang="ts">
   import { useRoute } from 'vue-router';
   const route = useRoute();
   const submitFn = () => {
      // form ile gelen bilgiler iÅŸlemden geÃ§tikten sonra
      route.push({
         name: "register",
         params: {
            registerId: this.id
         },
         query: {
            name: "Ahmet",
            surname: "Ã–zdemir"
         }
      });
   }
   </script>
   ```

## Introducing Navigation Guards
```
const router = createRouter({
   history: createWebHistory(),
   routes: [
      { path: '/', redirect: '/contact' },
      { name: 'contact', path: '/contact', component: ContactView },
      { path: '/about/:aboutId', component: AboutView, props: true },
   ],
});
router.beforeEach((to, from, next) => {
   // bazÄ± validasyon iÅŸlemleri (auth vs.)
   next(); // yÃ¶nlendirilmek istenen 'from' sayfasÄ±na geÃ§iÅŸ izni verir.
   // veya
   next(false); // yÃ¶nlendirilmek istenen 'from' sayfasÄ±na geÃ§iÅŸ izni vermez.
});
```
createRouter ile oluÅŸturduÄŸumuz router nesnemiz Ã¼zerinden beforeEach ve ilerde
gÃ¶receÄŸimiz beforeAfter metotlarÄ±mÄ±z var. beforeEachâ€™e odaklanacak olursak bu metot
ile sayfa yÃ¶nlendirmelerinden Ã¶nce baÅŸta authentication olmak Ã¼zere sayfa
geÃ§iÅŸlerinden yapÄ±lacak validasyonlarÄ±n yazÄ±ldÄ±ÄŸÄ± metottur.
Gelelim ```afterEach``` metoduna..
<br/>
```afterEach``` yÃ¶nlendirme kancasÄ±, kullanÄ±cÄ±larÄ±n hangi sayfalara gittiÄŸini izlemek veya
analitik veri toplamak iÃ§in kullanÄ±labilir. Ã–rneÄŸin, her bir yÃ¶nlendirme sonrasÄ±nda, analitik
servise bir istek gÃ¶ndererek kullanÄ±cÄ±nÄ±n hangi sayfaya gittiÄŸini kaydedebilirsiniz.

## Utilizing Route Metadata

Vue Router'da ```meta``` Ã¶zelliÄŸi, rotalarÄ±nÄ±zÄ± daha fazla bilgi veya Ã¶zel yapÄ±landÄ±rmalar ile
geniÅŸletmek iÃ§in kullanÄ±lan bir Ã¶zelliktir. ```meta``` Ã¶zelliÄŸi, her bir rotaya ekstra Ã¶zel alanlar
eklemenizi saÄŸlar ve bu alanlarÄ± kullanarak Ã¶zel iÅŸlemler yapabilirsiniz.
1. Ã–rneÄŸin beforeEach iÃ§inde kullanÄ±labilir.
   ```
   const router = createRouter({
      history: createWebHistory(),
      routes: [
         { path: '/', redirect: '/contact' },
         {
            name: 'contact',
            meta: {
               requiresAuth: true,
               pageTitle: "Ä°letiÅŸime GeÃ§!",
            }
            path: '/contact',
            component: ContactView
         },
         { path: '/about/:aboutId', component: AboutView, props: true },
      ],
   });
   
   router.beforeEach( (to, from, next) => {
      if(to.meta.requiresAuth) {
         console.log("Auth is required.");
         next(false);
      }
      next();
      }
   );
   ```
2. Komponent iÃ§inde kullanÄ±labilir.
   ```
   <template>
      <div>
         <h1>{{ getPageTitle }}</h1>
         <router-view></router-view>
      </div>
   </template>
   
   <script>
   const getPageTitle = computed(() => {
      return this.$route.meta.pageTitle || 'Sayfa BaÅŸlÄ±ÄŸÄ±';
   });
   </script>
   ```